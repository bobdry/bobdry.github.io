var docs=[];var DoSearch=function(){$.getJSON("/lunrRedux/Includes/lunrIndex.json",function(data){$.each(data,function(key){docs.push(data[key])});var idx=lunr(function(){this.ref("link");this.field("title");this.field("description");this.field("keywords");docs.forEach(function(doc){this.add(doc)},this)});function parse_query_string(query){var vars=query.split("&");var query_string={};for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(typeof query_string[pair[0]]==="undefined"){query_string[pair[0]]=decodeURIComponent(pair[1])}else if(typeof query_string[pair[0]]==="string"){var arr=[query_string[pair[0]],decodeURIComponent(pair[1])];query_string[pair[0]]=arr}else{query_string[pair[0]].push(decodeURIComponent(pair[1]))}}return query_string}var query=window.location.search.substring(1);var searchTerms=parse_query_string(query);var SearchArray=idx.search(searchTerms.search.replace(/\+/g," "));for(var index in SearchArray){SearchArray[index].title=data.filter(function(docs){return docs.link===SearchArray[index].ref})[0].title;SearchArray[index].description=data.filter(function(docs){return docs.link===SearchArray[index].ref})[0].description}var SearchArrayDOM=[];$.each(SearchArray,function(index){SearchArrayDOM.push('<div><p><a href="'+SearchArray[index].ref+'">'+SearchArray[index].title+"</a></p><p>"+SearchArray[index].description+"</p></div>")});var ResultsDiv=document.getElementById("SearchResults");if(SearchArray!=""){$(ResultsDiv).html(SearchArrayDOM)}else{$(ResultsDiv).html("No search results found. Please enter new search terms.")}})};DoSearch();
